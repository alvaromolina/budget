// schema.prisma

generator client {
  provider = "prisma-client-js"
}

generator zod {
  provider          = "zod-prisma-types"
  createInputTypes  = false
}

datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}


model User {
  id            String    @default(cuid()) @id
  name          String?
  email         String?   @unique
  password      String
  accounts      Account[]
  createdAt     DateTime  @default(now()) @map(name: "created_at")
  updatedAt     DateTime  @updatedAt @map(name: "updated_at")
  @@map(name: "users")
}

model Bank {
  id            String  @default(cuid()) @id
  name          String
  accounts      Account[]
  createdAt     DateTime  @default(now()) @map(name: "created_at")
  updatedAt     DateTime  @updatedAt @map(name: "updated_at")
  @@map(name: "banks")
}

model Account {
  id            String  @default(cuid()) @id
  name          String
  accountType   AccountType @default(BANK)
  user          User @relation(fields: [userId], references: [id])
  userId        String
  bank          Bank @relation(fields: [bankId], references: [id])
  bankId        String
  createdAt     DateTime  @default(now()) @map(name: "created_at")
  updatedAt     DateTime  @updatedAt @map(name: "updated_at")
  @@map(name: "accounts")
}


enum AccountType {
  BANK
  CASH
  ASSET
  DEBT
  INVESTMENT
}